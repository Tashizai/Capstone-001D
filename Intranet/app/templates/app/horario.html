{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Información del profesor -->
<div class="bg-white shadow-md rounded-lg p-6 flex justify-between items-center mt-4">
    <div class="flex items-center space-x-4">
        <img src="{{ persona.foto.url }}" alt="Foto de perfil" class="w-16 h-16 rounded-full">
        <div>
            <h2 class="text-2xl font-bold">{{ persona.nombre }} {{ persona.apellido }}</h2>
            <p class="text-gray-600">{{ persona.email }}</p>
            <p class="text-gray-600">{{ persona.rol }}</p>
        </div>
    </div>
</div>

<!-- Mensaje de éxito -->
<div id="mensaje-guardado" class="hidden bg-green-500 text-white p-2 mb-4 rounded">
    Cambios guardados con éxito.
</div>

<!-- Tabla de horario -->
<div class="container mx-auto py-8">
    <h2 class="text-lg font-bold">Horario de Trabajo</h2>
    <form id="form-horario" method="POST">
        {% csrf_token %}
        <table class="table-auto w-full border-collapse border">
            <thead>
                <tr>
                    <th class="border px-4 py-2">Horario</th>
                    <th class="border px-4 py-2">Lunes</th>
                    <th class="border px-4 py-2">Martes</th>
                    <th class="border px-4 py-2">Miércoles</th>
                    <th class="border px-4 py-2">Jueves</th>
                    <th class="border px-4 py-2">Viernes</th>
                </tr>
            </thead>
            <tbody id="tabla-horarios">
                <!-- Bloques predefinidos -->
                <tr>
                    <td class="border px-4 py-2">08:30 - 10:00</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="LUNES" data-hora="08:30-10:00">{{ lunes_primera_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="MARTES" data-hora="08:30-10:00">{{ martes_primera_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="MIERCOLES" data-hora="08:30-10:00">{{ miercoles_primera_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="JUEVES" data-hora="08:30-10:00">{{ jueves_primera_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="VIERNES" data-hora="08:30-10:00">{{ viernes_primera_clase.asignatura }}</td>
                </tr>
                <!-- Recreo -->
                <tr>
                    <td class="border px-4 py-2">10:00 - 10:20 (Recreo)</td>
                    <td class="border px-4 py-2" colspan="5">Recreo</td>
                </tr>
                <!-- Segundo Bloque -->
                <tr>
                    <td class="border px-4 py-2">10:20 - 11:50</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="LUNES" data-hora="10:20-11:50">{{ lunes_segunda_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="MARTES" data-hora="10:20-11:50">{{ martes_segunda_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="MIERCOLES" data-hora="10:20-11:50">{{ miercoles_segunda_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="JUEVES" data-hora="10:20-11:50">{{ jueves_segunda_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="VIERNES" data-hora="10:20-11:50">{{ viernes_segunda_clase.asignatura }}</td>
                </tr>
                <!-- Recreo -->
                <tr>
                    <td class="border px-4 py-2">11:50 - 12:15 (Recreo)</td>
                    <td class="border px-4 py-2" colspan="5">Recreo</td>
                </tr>
                <!-- Tercer Bloque -->
                <tr>
                    <td class="border px-4 py-2">12:15 - 13:40</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="LUNES" data-hora="12:15-13:40">{{ lunes_tercera_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="MARTES" data-hora="12:15-13:40">{{ martes_tercera_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="MIERCOLES" data-hora="12:15-13:40">{{ miercoles_tercera_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="JUEVES" data-hora="12:15-13:40">{{ jueves_tercera_clase.asignatura }}</td>
                    <td class="border px-4 py-2" contenteditable="true" data-dia="VIERNES" data-hora="12:15-13:40">{{ viernes_tercera_clase.asignatura }}</td>
                </tr>
            </tbody>
        </table>
    </form>
</div>

<!-- Botones para editar y guardar -->
<div class="text-right mt-4">
    <button id="editar-horario" class="bg-blue-500 text-white px-4 py-2 rounded">Editar Horario</button>
    <button id="guardar-horario" class="bg-green-500 text-white px-4 py-2 rounded hidden">Guardar Horario</button>
</div>

<script src="{% static 'app/js/horario.js' %}"></script>

{% endblock %}
